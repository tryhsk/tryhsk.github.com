function headerPosition(){$(window).scrollTop()>$("header").height()?$("header .navigation-bar").addClass("fixed-top").addClass(" shadow"):$("header .navigation-bar").removeClass("fixed-top").removeClass(" shadow")}$(function(){$("[data-load]").each(function(){$(this).load($(this).data("load"),function(){})}),window.prettyPrint&&prettyPrint(),$(".history-back").on("click",function(e){return e.preventDefault(),history.back(),!1})}),$(function(){if($("nav > .side-menu").length>0){var e=$("nav > .side-menu"),n=e.position().top;$(window).scroll(function(){e.css($(window).scrollTop()>n?{position:"fixed",top:"65px","z-index":"1000"}:{position:"static"})})}}),$(function(){setTimeout(function(){headerPosition()},100)}),$(window).scroll(function(){headerPosition()}),METRO_AUTO_REINIT=!0,function(){var e=this,n=e._,t=Array.prototype,r=Object.prototype,a=Function.prototype,s=t.push,o=t.slice,i=t.concat,c=r.toString,l=r.hasOwnProperty,u=Array.isArray,p=Object.keys,d=a.bind,f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):e._=f,f.VERSION="1.7.0";var h=function(e,n,t){if(void 0===n)return e;switch(null==t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,a){return e.call(n,t,r,a)};case 4:return function(t,r,a,s){return e.call(n,t,r,a,s)}}return function(){return e.apply(n,arguments)}};f.iteratee=function(e,n,t){return null==e?f.identity:f.isFunction(e)?h(e,n,t):f.isObject(e)?f.matches(e):f.property(e)},f.each=f.forEach=function(e,n,t){if(null==e)return e;n=h(n,t);var r,a=e.length;if(a===+a)for(r=0;a>r;r++)n(e[r],r,e);else{var s=f.keys(e);for(r=0,a=s.length;a>r;r++)n(e[s[r]],s[r],e)}return e},f.map=f.collect=function(e,n,t){if(null==e)return[];n=f.iteratee(n,t);for(var r,a=e.length!==+e.length&&f.keys(e),s=(a||e).length,o=Array(s),i=0;s>i;i++)r=a?a[i]:i,o[i]=n(e[r],r,e);return o};var g="Reduce of empty array with no initial value";f.reduce=f.foldl=f.inject=function(e,n,t,r){null==e&&(e=[]),n=h(n,r,4);var a,s=e.length!==+e.length&&f.keys(e),o=(s||e).length,i=0;if(arguments.length<3){if(!o)throw new TypeError(g);t=e[s?s[i++]:i++]}for(;o>i;i++)a=s?s[i]:i,t=n(t,e[a],a,e);return t},f.reduceRight=f.foldr=function(e,n,t,r){null==e&&(e=[]),n=h(n,r,4);var a,s=e.length!==+e.length&&f.keys(e),o=(s||e).length;if(arguments.length<3){if(!o)throw new TypeError(g);t=e[s?s[--o]:--o]}for(;o--;)a=s?s[o]:o,t=n(t,e[a],a,e);return t},f.find=f.detect=function(e,n,t){var r;return n=f.iteratee(n,t),f.some(e,function(e,t,a){return n(e,t,a)?(r=e,!0):void 0}),r},f.filter=f.select=function(e,n,t){var r=[];return null==e?r:(n=f.iteratee(n,t),f.each(e,function(e,t,a){n(e,t,a)&&r.push(e)}),r)},f.reject=function(e,n,t){return f.filter(e,f.negate(f.iteratee(n)),t)},f.every=f.all=function(e,n,t){if(null==e)return!0;n=f.iteratee(n,t);var r,a,s=e.length!==+e.length&&f.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(a=s?s[r]:r,!n(e[a],a,e))return!1;return!0},f.some=f.any=function(e,n,t){if(null==e)return!1;n=f.iteratee(n,t);var r,a,s=e.length!==+e.length&&f.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(a=s?s[r]:r,n(e[a],a,e))return!0;return!1},f.contains=f.include=function(e,n){return null==e?!1:(e.length!==+e.length&&(e=f.values(e)),f.indexOf(e,n)>=0)},f.invoke=function(e,n){var t=o.call(arguments,2),r=f.isFunction(n);return f.map(e,function(e){return(r?n:e[n]).apply(e,t)})},f.pluck=function(e,n){return f.map(e,f.property(n))},f.where=function(e,n){return f.filter(e,f.matches(n))},f.findWhere=function(e,n){return f.find(e,f.matches(n))},f.max=function(e,n,t){var r,a,s=-(1/0),o=-(1/0);if(null==n&&null!=e){e=e.length===+e.length?e:f.values(e);for(var i=0,c=e.length;c>i;i++)r=e[i],r>s&&(s=r)}else n=f.iteratee(n,t),f.each(e,function(e,t,r){a=n(e,t,r),(a>o||a===-(1/0)&&s===-(1/0))&&(s=e,o=a)});return s},f.min=function(e,n,t){var r,a,s=1/0,o=1/0;if(null==n&&null!=e){e=e.length===+e.length?e:f.values(e);for(var i=0,c=e.length;c>i;i++)r=e[i],s>r&&(s=r)}else n=f.iteratee(n,t),f.each(e,function(e,t,r){a=n(e,t,r),(o>a||a===1/0&&s===1/0)&&(s=e,o=a)});return s},f.shuffle=function(e){for(var n,t=e&&e.length===+e.length?e:f.values(e),r=t.length,a=Array(r),s=0;r>s;s++)n=f.random(0,s),n!==s&&(a[s]=a[n]),a[n]=t[s];return a},f.sample=function(e,n,t){return null==n||t?(e.length!==+e.length&&(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,n))},f.sortBy=function(e,n,t){return n=f.iteratee(n,t),f.pluck(f.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(r>t||void 0===r)return-1}return e.index-n.index}),"value")};var v=function(e){return function(n,t,r){var a={};return t=f.iteratee(t,r),f.each(n,function(r,s){var o=t(r,s,n);e(a,r,o)}),a}};f.groupBy=v(function(e,n,t){f.has(e,t)?e[t].push(n):e[t]=[n]}),f.indexBy=v(function(e,n,t){e[t]=n}),f.countBy=v(function(e,n,t){f.has(e,t)?e[t]++:e[t]=1}),f.sortedIndex=function(e,n,t,r){t=f.iteratee(t,r,1);for(var a=t(n),s=0,o=e.length;o>s;){var i=s+o>>>1;t(e[i])<a?s=i+1:o=i}return s},f.toArray=function(e){return e?f.isArray(e)?o.call(e):e.length===+e.length?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:e.length===+e.length?e.length:f.keys(e).length},f.partition=function(e,n,t){n=f.iteratee(n,t);var r=[],a=[];return f.each(e,function(e,t,s){(n(e,t,s)?r:a).push(e)}),[r,a]},f.first=f.head=f.take=function(e,n,t){return null==e?void 0:null==n||t?e[0]:f.initial(e,e.length-n)},f.initial=function(e,n,t){return o.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},f.last=function(e,n,t){return null==e?void 0:null==n||t?e[e.length-1]:f.rest(e,Math.max(0,e.length-n))},f.rest=f.tail=f.drop=function(e,n,t){return o.call(e,null==n||t?1:n)},f.compact=function(e){return f.filter(e,f.identity)};var m=function(e,n,t,r){if(n&&f.every(e,f.isArray))return i.apply(r,e);for(var a=0,o=e.length;o>a;a++){var c=e[a];f.isArray(c)||f.isArguments(c)?n?s.apply(r,c):m(c,n,t,r):t||r.push(c)}return r};f.flatten=function(e,n){return m(e,n,!1,[])},f.without=function(e){return f.difference(e,o.call(arguments,1))},f.uniq=f.unique=function(e,n,t,r){if(null==e)return[];f.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=f.iteratee(t,r));for(var a=[],s=[],o=0,i=e.length;i>o;o++){var c=e[o];if(n)o&&s===c||a.push(c),s=c;else if(t){var l=t(c,o,e);f.indexOf(s,l)<0&&(s.push(l),a.push(c))}else f.indexOf(a,c)<0&&a.push(c)}return a},f.union=function(){return f.uniq(m(arguments,!0,!0,[]))},f.intersection=function(e){if(null==e)return[];for(var n=[],t=arguments.length,r=0,a=e.length;a>r;r++){var s=e[r];if(!f.contains(n,s)){for(var o=1;t>o&&f.contains(arguments[o],s);o++);o===t&&n.push(s)}}return n},f.difference=function(e){var n=m(o.call(arguments,1),!0,!0,[]);return f.filter(e,function(e){return!f.contains(n,e)})},f.zip=function(e){if(null==e)return[];for(var n=f.max(arguments,"length").length,t=Array(n);n-->0;)t[n]=f.pluck(arguments,n);return t},f.unzip=function(e){return f.zip.apply(null,e)},f.object=function(e,n){if(null==e)return{};for(var t={},r=0,a=e.length;a>r;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t},f.indexOf=function(e,n,t){if(null==e)return-1;var r=0,a=e.length;if(t){if("number"!=typeof t)return r=f.sortedIndex(e,n),e[r]===n?r:-1;r=0>t?Math.max(0,a+t):t}for(;a>r;r++)if(e[r]===n)return r;return-1},f.lastIndexOf=function(e,n,t){if(null==e)return-1;var r=e.length;for("number"==typeof t&&(r=0>t?r+t+1:Math.min(r,t+1));--r>=0;)if(e[r]===n)return r;return-1},f.range=function(e,n,t){arguments.length<=1&&(n=e||0,e=0),t=t||1;for(var r=Math.max(Math.ceil((n-e)/t),0),a=Array(r),s=0;r>s;s++,e+=t)a[s]=e;return a};var y=function(){};f.bind=function(e,n){var t,r;if(d&&e.bind===d)return d.apply(e,o.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");return t=o.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(n,t.concat(o.call(arguments)));y.prototype=e.prototype;var a=new y;y.prototype=null;var s=e.apply(a,t.concat(o.call(arguments)));return f.isObject(s)?s:a}},f.partial=function(e){var n=o.call(arguments,1);return function(){for(var t=0,r=n.slice(),a=0,s=r.length;s>a;a++)r[a]===f&&(r[a]=arguments[t++]);for(;t<arguments.length;)r.push(arguments[t++]);return e.apply(this,r)}},f.bindAll=function(e){var n,t,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(n=1;r>n;n++)t=arguments[n],e[t]=f.bind(e[t],e);return e},f.memoize=function(e,n){var t=function(r){var a=t.cache,s=""+(n?n.apply(this,arguments):r);return f.has(a,s)||(a[s]=e.apply(this,arguments)),a[s]};return t.cache={},t},f.delay=function(e,n){var t=o.call(arguments,2);return setTimeout(function(){return e.apply(null,t)},n)},f.defer=function(e){return f.delay.apply(f,[e,1].concat(o.call(arguments,1)))},f.throttle=function(e,n,t){var r,a,s,o=null,i=0;t||(t={});var c=function(){i=t.leading===!1?0:f.now(),o=null,s=e.apply(r,a),o||(r=a=null)};return function(){var l=f.now();i||t.leading!==!1||(i=l);var u=n-(l-i);return r=this,a=arguments,0>=u||u>n?(o&&(clearTimeout(o),o=null),i=l,s=e.apply(r,a),o||(r=a=null)):o||t.trailing===!1||(o=setTimeout(c,u)),s}},f.debounce=function(e,n,t){var r,a,s,o,i,c=function(){var l=f.now()-o;n>l&&l>=0?r=setTimeout(c,n-l):(r=null,t||(i=e.apply(s,a),r||(s=a=null)))};return function(){s=this,a=arguments,o=f.now();var l=t&&!r;return r||(r=setTimeout(c,n)),l&&(i=e.apply(s,a),s=a=null),i}},f.wrap=function(e,n){return f.partial(n,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var e=arguments,n=e.length-1;return function(){for(var t=n,r=e[n].apply(this,arguments);t--;)r=e[t].call(this,r);return r}},f.after=function(e,n){return function(){return--e<1?n.apply(this,arguments):void 0}},f.before=function(e,n){var t;return function(){return--e>0?t=n.apply(this,arguments):n=null,t}},f.once=f.partial(f.before,2);var b=!{toString:null}.propertyIsEnumerable("toString"),k=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];f.keys=function(e){if(!f.isObject(e))return[];if(p)return p(e);var n=[];for(var t in e)f.has(e,t)&&n.push(t);if(b)for(var r=k.length;r--;){var a=k[r];f.has(e,a)&&!f.contains(n,a)&&n.push(a)}return n},f.values=function(e){for(var n=f.keys(e),t=n.length,r=Array(t),a=0;t>a;a++)r[a]=e[n[a]];return r},f.pairs=function(e){for(var n=f.keys(e),t=n.length,r=Array(t),a=0;t>a;a++)r[a]=[n[a],e[n[a]]];return r},f.invert=function(e){for(var n={},t=f.keys(e),r=0,a=t.length;a>r;r++)n[e[t[r]]]=t[r];return n},f.functions=f.methods=function(e){var n=[];for(var t in e)f.isFunction(e[t])&&n.push(t);return n.sort()},f.extend=function(e){if(!f.isObject(e))return e;for(var n,t,r=1,a=arguments.length;a>r;r++){n=arguments[r];for(t in n)e[t]=n[t]}return e},f.pick=function(e,n,t){var r,a={};if(null==e)return a;if(f.isFunction(n)){n=h(n,t);for(r in e){var s=e[r];n(s,r,e)&&(a[r]=s)}}else{var c=i.apply([],o.call(arguments,1));e=new Object(e);for(var l=0,u=c.length;u>l;l++)r=c[l],r in e&&(a[r]=e[r])}return a},f.omit=function(e,n,t){if(f.isFunction(n))n=f.negate(n);else{var r=f.map(i.apply([],o.call(arguments,1)),String);n=function(e,n){return!f.contains(r,n)}}return f.pick(e,n,t)},f.defaults=function(e){if(!f.isObject(e))return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];for(var a in r)void 0===e[a]&&(e[a]=r[a])}return e},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,n){return n(e),e};var w=function(e,n,t,r){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof f&&(e=e._wrapped),n instanceof f&&(n=n._wrapped);var a=c.call(e);if(a!==c.call(n))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof n)return!1;var o=e.constructor,i=n.constructor;if(o!==i&&!(f.isFunction(o)&&o instanceof o&&f.isFunction(i)&&i instanceof i)&&"constructor"in e&&"constructor"in n)return!1}for(var l=t.length;l--;)if(t[l]===e)return r[l]===n;t.push(e),r.push(n);var u,p;if(s){if(u=e.length,p=u===n.length)for(;u--&&(p=w(e[u],n[u],t,r)););}else{var d,h=f.keys(e);if(u=h.length,p=f.keys(n).length===u)for(;u--&&(d=h[u],p=f.has(n,d)&&w(e[d],n[d],t,r)););}return t.pop(),r.pop(),p};f.isEqual=function(e,n){return w(e,n,[],[])},f.isEmpty=function(e){if(null==e)return!0;if(f.isArray(e)||f.isString(e)||f.isArguments(e))return 0===e.length;for(var n in e)if(f.has(e,n))return!1;return!0},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=u||function(e){return"[object Array]"===c.call(e)},f.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){f["is"+e]=function(n){return c.call(n)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,n){return null!=e&&l.call(e,n)},f.noConflict=function(){return e._=n,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(e){return function(n){return null==n?void 0:n[e]}},f.matches=function(e){var n=f.pairs(e),t=n.length;return function(e){if(null==e)return!t;e=new Object(e);for(var r=0;t>r;r++){var a=n[r],s=a[0];if(a[1]!==e[s]||!(s in e))return!1}return!0}},f.times=function(e,n,t){var r=Array(Math.max(0,e));n=h(n,t,1);for(var a=0;e>a;a++)r[a]=n(a);return r},f.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=f.invert(x),S=function(e){var n=function(n){return e[n]},t="(?:"+f.keys(e).join("|")+")",r=RegExp(t),a=RegExp(t,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(a,n):e}};f.escape=S(x),f.unescape=S($),f.result=function(e,n,t){var r=null==e?void 0:e[n];return void 0===r?t:f.isFunction(r)?e[n]():r};var _=0;f.uniqueId=function(e){var n=++_+"";return e?e+n:n},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,C=function(e){return"\\"+R[e]};f.template=function(e,n,t){!n&&t&&(n=t),n=f.defaults({},n,f.templateSettings);var r=RegExp([(n.escape||E).source,(n.interpolate||E).source,(n.evaluate||E).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(r,function(n,t,r,o,i){return s+=e.slice(a,i).replace(T,C),a=i+n.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),n}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(i){throw i.source=s,i}var c=function(e){return o.call(this,e,f)},l=n.variable||"obj";return c.source="function("+l+"){\n"+s+"}",c},f.chain=function(e){var n=f(e);return n._chain=!0,n};var A=function(e,n){return e._chain?f(n).chain():n};f.mixin=function(e){f.each(f.functions(e),function(n){var t=f[n]=e[n];f.prototype[n]=function(){var e=[this._wrapped];return s.apply(e,arguments),A(this,t.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=t[e];f.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],A(this,t)}}),f.each(["concat","join","slice"],function(e){var n=t[e];f.prototype[e]=function(){return A(this,n.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}.call(this),angular.module("ngLocale",[],["$provide",function(e){function n(e){e+="";var n=e.indexOf(".");return-1==n?0:e.length-n-1}function t(e,t){var r=t;void 0===r&&(r=Math.min(n(e),3));var a=Math.pow(10,r),s=(e*a|0)%a;return{v:r,f:s}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. H:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"руб.",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ru",pluralCat:function(e,n){var a=0|e,s=t(e,n);return 0==s.v&&a%10==1&&a%100!=11?r.ONE:0==s.v&&a%10>=2&&4>=a%10&&(12>a%100||a%100>14)?r.FEW:0==s.v&&a%10==0||0==s.v&&a%10>=5&&9>=a%10||0==s.v&&a%100>=11&&14>=a%100?r.MANY:r.OTHER}})}]),function(e,n,t){"use strict";function r(){function e(e,t){return n.extend(new(n.extend(function(){},{prototype:e})),t)}function t(e,n){var t=n.caseInsensitiveMatch,r={originalPath:e,regexp:e},a=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,n,t,r){var s="?"===r?r:null,o="*"===r?r:null;return a.push({name:t,optional:!!s}),n=n||"",""+(s?"":n)+"(?:"+(s?n:"")+(o&&"(.+?)"||"([^/]+)")+(s||"")+")"+(s||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",t?"i":""),r}var r={};this.when=function(e,a){if(r[e]=n.extend({reloadOnSearch:!0},a,e&&t(e,a)),e){var s="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";r[s]=n.extend({redirectTo:e},t(s,a))}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(t,a,s,o,i,c,l,u){function p(e,n){var t=n.keys,r={};if(!n.regexp)return null;var a=n.regexp.exec(e);if(!a)return null;for(var s=1,o=a.length;o>s;++s){var i=t[s-1],c="string"==typeof a[s]?decodeURIComponent(a[s]):a[s];i&&c&&(r[i.name]=c)}return r}function d(){var e=f(),r=v.current;e&&r&&e.$$route===r.$$route&&n.equals(e.pathParams,r.pathParams)&&!e.reloadOnSearch&&!g?(r.params=e.params,n.copy(r.params,s),t.$broadcast("$routeUpdate",r)):(e||r)&&(g=!1,t.$broadcast("$routeChangeStart",e,r),v.current=e,e&&e.redirectTo&&(n.isString(e.redirectTo)?a.path(h(e.redirectTo,e.params)).search(e.params).replace():a.url(e.redirectTo(e.pathParams,a.path(),a.search())).replace()),o.when(e).then(function(){if(e){var t,r,a=n.extend({},e.resolve);return n.forEach(a,function(e,t){a[t]=n.isString(e)?i.get(e):i.invoke(e)}),n.isDefined(t=e.template)?n.isFunction(t)&&(t=t(e.params)):n.isDefined(r=e.templateUrl)&&(n.isFunction(r)&&(r=r(e.params)),r=u.getTrustedResourceUrl(r),n.isDefined(r)&&(e.loadedTemplateUrl=r,t=c.get(r,{cache:l}).then(function(e){return e.data}))),n.isDefined(t)&&(a.$template=t),o.all(a)}}).then(function(a){e==v.current&&(e&&(e.locals=a,n.copy(e.params,s)),t.$broadcast("$routeChangeSuccess",e,r))},function(n){e==v.current&&t.$broadcast("$routeChangeError",e,r,n)}))}function f(){var t,s;return n.forEach(r,function(r,o){!s&&(t=p(a.path(),r))&&(s=e(r,{params:n.extend({},a.search(),t),pathParams:t}),s.$$route=r)}),s||r[null]&&e(r[null],{params:{},pathParams:{}})}function h(e,t){var r=[];return n.forEach((e||"").split(":"),function(e,n){if(0===n)r.push(e);else{var a=e.match(/(\w+)(.*)/),s=a[1];r.push(t[s]),r.push(a[2]||""),delete t[s]}}),r.join("")}var g=!1,v={routes:r,reload:function(){g=!0,t.$evalAsync(d)}};return t.$on("$locationChangeSuccess",d),v}]}function a(){this.$get=function(){return{}}}function s(e,t,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,s,o,i,c){function l(){f&&(f.remove(),f=null),p&&(p.$destroy(),p=null),d&&(r.leave(d,function(){f=null}),f=d,d=null)}function u(){var o=e.current&&e.current.locals,i=o&&o.$template;if(n.isDefined(i)){var u=a.$new(),f=e.current,v=c(u,function(e){r.enter(e,null,d||s,function(){!n.isDefined(h)||h&&!a.$eval(h)||t()}),l()});d=v,p=f.scope=u,p.$emit("$viewContentLoaded"),p.$eval(g)}else l()}var p,d,f,h=o.autoscroll,g=o.onload||"";a.$on("$routeChangeSuccess",u),u()}}}function o(e,n,t){return{restrict:"ECA",priority:-400,link:function(r,a){var s=t.current,o=s.locals;a.html(o.$template);var i=e(a.contents());if(s.controller){o.$scope=r;var c=n(s.controller,o);s.controllerAs&&(r[s.controllerAs]=c),a.data("$ngControllerController",c),a.children().data("$ngControllerController",c)}i(r)}}}var i=n.module("ngRoute",["ng"]).provider("$route",r);i.provider("$routeParams",a),i.directive("ngView",s),i.directive("ngView",o),s.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,n,t){"use strict";function r(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&i.test("."+e)}function a(e,n){if(!r(n))throw o("badmember",'Dotted member path "@{0}" is invalid.',n);for(var a=n.split("."),s=0,i=a.length;i>s&&e!==t;s++){var c=a[s];e=null!==e?e[c]:t}return e}function s(e,t){t=t||{},n.forEach(t,function(e,n){delete t[n]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t}var o=n.$$minErr("$resource"),i=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;n.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(e,r){function i(e){return c(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function c(e,n){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,n?"%20":"+")}function l(e,n){this.template=e,this.defaults=n||{},this.urlParams={}}function u(i,c,m){function y(e,n){var t={};return n=h({},c,n),f(n,function(n,r){v(n)&&(n=n()),t[r]=n&&n.charAt&&"@"==n.charAt(0)?a(e,n.substr(1)):n}),t}function b(e){return e.resource}function k(e){s(e||{},this)}var w=new l(i);return m=h({},p,m),f(m,function(a,i){var c=/^(POST|PUT|PATCH)$/i.test(a.method);k[i]=function(i,l,u,p){var m,x,$,S={};switch(arguments.length){case 4:$=p,x=u;case 3:case 2:if(!v(l)){S=i,m=l,x=u;break}if(v(i)){x=i,$=l;break}x=l,$=u;case 1:v(i)?x=i:c?m=i:S=i;break;case 0:break;default:throw o("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var _=this instanceof k,E=_?m:a.isArray?[]:new k(m),R={},T=a.interceptor&&a.interceptor.response||b,C=a.interceptor&&a.interceptor.responseError||t;f(a,function(e,n){"params"!=n&&"isArray"!=n&&"interceptor"!=n&&(R[n]=g(e))}),c&&(R.data=m),w.setUrlParams(R,h({},y(m,a.params||{}),S),a.url);var A=e(R).then(function(e){var t=e.data,r=E.$promise;if(t){if(n.isArray(t)!==!!a.isArray)throw o("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",a.isArray?"array":"object",n.isArray(t)?"array":"object");a.isArray?(E.length=0,f(t,function(e){E.push(new k(e))})):(s(t,E),E.$promise=r)}return E.$resolved=!0,e.resource=E,e},function(e){return E.$resolved=!0,($||d)(e),r.reject(e)});return A=A.then(function(e){var n=T(e);return(x||d)(n,e.headers),n},C),_?A:(E.$promise=A,E.$resolved=!1,E)},k.prototype["$"+i]=function(e,n,t){v(e)&&(t=n,n=e,e={});var r=k[i].call(this,e,this,n,t);return r.$promise||r}}),k.bind=function(e){return u(i,h({},c,e),m)},k}var p={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},d=n.noop,f=n.forEach,h=n.extend,g=n.copy,v=n.isFunction;return l.prototype={setUrlParams:function(e,t,r){var a,s,c=this,l=r||c.template,u=c.urlParams={};f(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]=!0)}),l=l.replace(/\\:/g,":"),t=t||{},f(c.urlParams,function(e,r){a=t.hasOwnProperty(r)?t[r]:c.defaults[r],n.isDefined(a)&&null!==a?(s=i(a),l=l.replace(new RegExp(":"+r+"(\\W|$)","g"),function(e,n){return s+n})):l=l.replace(new RegExp("(/?):"+r+"(\\W|$)","g"),function(e,n,t){return"/"==t.charAt(0)?t:n+t})}),l=l.replace(/\/+$/,"")||"/",l=l.replace(/\/\.(?=\w+($|\?))/,"."),e.url=l.replace(/\/\\\./,"/."),f(t,function(n,t){c.urlParams[t]||(e.params=e.params||{},e.params[t]=n)})}},u}])}(window,window.angular),angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){function t(){var e,t,r,o;for(e in s)c(a[e])&&n.cookies(e,void 0);for(e in a)t=a[e],angular.isString(t)||(t=""+t,a[e]=t),t!==s[e]&&(n.cookies(e,t),o=!0);if(o){o=!1,r=n.cookies();for(e in a)a[e]!==r[e]&&(c(r[e])?delete a[e]:a[e]=r[e],o=!0)}}var r,a={},s={},o=!1,i=angular.copy,c=angular.isUndefined;return n.addPollFn(function(){var t=n.cookies();r!=t&&(r=t,i(t,s),i(t,a),o&&e.$apply())})(),o=!0,e.$watch(t),a}]).factory("$cookieStore",["$cookies",function(e){return{get:function(n){var t=e[n];return t?angular.fromJson(t):t},put:function(n,t){e[n]=angular.toJson(t)},remove:function(n){delete e[n]}}}]);var tryHskControllers=angular.module("tryHskControllers",[]),tryHskDirectives=angular.module("tryHskDirectives",[]),tryHskServices=angular.module("tryHskServices",["ngResource"]),templates=angular.module("templates",[]),tryHsk=angular.module("tryHsk",["ngRoute","ngCookies","templates","tryHskControllers","tryHskFilters","tryHskDirectives","tryHskServices"]);angular.module("templates").run(["$templateCache",function(e){e.put("partials/checkbox/checkbox.html",'<div data-role=treeview class=treeview><ul><li class=node><span class=node-toggle></span><span class=leaf>HSK level</span><ul><li data-mode=checkbox><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.hsk1><span class=check></span><span class=leaf>HSK 1</span></label></li><li data-mode=checkbox><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.hsk2><span class=check></span><span class=leaf>HSK 2</span></label></li><li data-mode=checkbox><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.hsk3><span class=check></span><span class=leaf>HSK 3</span></label></li></ul></li><li class=node><span class=node-toggle></span><span class=leaf>часть речи</span><ul><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.noun><span class=check></span><span class=leaf>существительные</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.pronoun><span class=check></span><span class=leaf>числительные</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.verb><span class=check></span><span class=leaf>глаголы</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.adjective><span class=check></span><span class=leaf>прилагательные</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.numeral><span class=check></span><span class=leaf>счётное слово</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.otherPart><span class=check></span><span class=leaf>другие</span></label></li></ul></li><li class=node><span class=node-toggle></span><span class=leaf>Тематические</span><ul><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.place><span class=check></span><span class=leaf>Место</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.relate><span class=check></span><span class=leaf>Отношения</span></label></li><li><label class="input-control checkbox"><input type=checkbox ng-model=checkboxValues.otherThemes><span class=check></span><span class=leaf>другие</span></label></li></ul></li></ul></div>'),e.put("partials/info/info.html","<div id=_page_3 ng-controller=InfoController class=frame></div>"),e.put("partials/love/love.html",'<div id=_page_5 ng-controller=LoveController class="frame no-padding-top no-padding-right"><img src=https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67 alt="Fork me on GitHub" data-canonical-src=https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png class=place-right><div class="grid no-margin"><div class="row condensed no-margin"><p class="leader v-align-middle">github.com/tryhsk/tryhsk.github.com</p></div><div class="row condensed"><p class=sub-leader>База слов в формате google Docs</p></div><div class="row condensed"><p class=header>docs.google.com/spreadsheets/d/1eCcrph6foyjtuQBQxeaZF8ZyrP3EUIE8uiJf3yVISS4/edit?usp=sharing</p></div></div></div>'),e.put("partials/settings/settings.html",'<div id=_page_4 ng-controller=SettingsController class=frame><div class="input-control select"><select ng-model=selectLang ng-options="selectLang for selectLang in languages" ng-change=freshLanguage(selectLang)></select></div><div class="grid fluid"><div class="row cells2"><div class=cell><div class="row condensed"><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.sound><span class=check></span><span class=leaf>Произношение</span></label></div></div><div class="row condensed"><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.color><span class=check></span><span class=leaf>Расскаска слогов по тонам</span></label></div></div><div class="row condensed"><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.number><span class=check></span><span class=leaf>Цифры тонов</span></label></div></div><div class="row condensed"><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.letter><span class=check></span><span class=leaf>Подчёркивания</span></label></div></div></div><div class=cell><div class=pinyin><span style="font-size: xx-large; color:{{tone.color}}" ng-repeat="tone in example"><span ng-hide=settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></div></div></div></div></div>'),e.put("partials/summary/summary.html",'<div id=_page_2 ng-controller=SummaryController class="frame frame no-padding"><div class="searchSummary padding10">Поиск:<input ng-model=query><ng-pluralize count=words.length when="{\'0\': \'Ничего не выбрано\', \'one\': \'Выбрано {} слово\', \'few\': \'Выбрано {} слово\', \'many\': \'Выбрано {} слов\'}" class=padding10></ng-pluralize></div><div class="grid margin20"><div class="row cells12"><div class="cell colspan3"><div ng-include="\'partials/checkbox/checkbox.html\'"></div></div><div id=table class="cell colspan9 tableContainer"><div ng-show=summaryLoader class=summaryLoader><div class=spinner><div class=rect1></div><div class=rect2></div><div class=rect3></div><div class=rect4></div><div class=rect5></div></div></div><table class=table><thead><div class="row cells4"><div class="text-left cell"><a ng-click="predicate = \'id\'; reverse=false">Иероглиф{{language.char}}</a>(<a ng-click="predicate = \'-id\'; reverse=false">^</a>)</div><div class="text-left cell"><a ng-click="predicate = \'s\'; reverse=!reverse">Пиньинь{{language.pinyin}}</a></div><div class="text-left cell"><a ng-click="predicate = \'russian\'; reverse=!reverse">Русский{{language.translate}}</a></div><div style="display: none" class="text-left cell"><a ng-click="predicate = \'english\'; reverse=!reverse">Английский{{language.eng}}</a></div></div></thead><tbody class=scrollContent><div class=zoneSummary><div ng-repeat="word in words | filter:query | orderBy:predicate:reverse" class="row cells12"><div class="char char_big cell colspan3">{{word.id}} {{word.char}}</div><div class="pinyin cell colspan3"><span style=color:{{tone.colorStyle}} ng-repeat="tone in word.pinyin"><span ng-show=!settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></div><div class="russian cell colspan6">{{word.russian}}</div></div></div></tbody></table></div></div></div></div>'),
e.put("partials/test/test.html",'<div id=_page_1 ng-controller=TestController class="frame no-padding"><div class=grid><div class="row cells12"><div class="cell colspan3"><div class="row condensed"><div class="margin10 label"><div class="input-control select"><select ng-model=select ng-options="select for select in regimes"></select></div></div></div><div class="row condensed"><div id=sound></div><button ng-class=class_button_next ng-click=nextWord() class="button margin10 align-center">{{button_next}}<span ng-show=showSpin class="mif-loop2 align-right"></span></button></div><div class="row condensed"><output id=value></output><ng-pluralize count=words.length when="{\'0\': \'Ничего не выбрано\', \'1\': \'Слишком мало слов. Выбрано {} слово\', \'2\': \'Слишком мало слов. Выбрано {} слова\', \'3\': \'Слишком мало слов. Выбрано {} слова\', \'4\': \'Слишком мало слов. Выбрано {} слова\', \'5\': \'Слишком мало слов. Выбрано {} слов\', \'6\': \'Слишком мало слов. Выбрано {} слов\', \'7\': \'Слишком мало слов. Выбрано {} слов\', \'8\': \'Слишком мало слов. Выбрано {} слов\', \'9\': \'Слишком мало слов. Выбрано {} слов\', \'one\': \'Выбрано {} слово\', \'few\': \'Выбрано {} слово\', \'many\': \'Выбрано {} слов\'}" class=margin10></ng-pluralize></div><div class="row condensed"><h1 ng-show=answer ng-bind=currentRights class="margin10 align-center"></h1></div></div><div class="cell colspan6"><div class="row condensed"><center><button ng-show="soundCharRegime || soundTranslateRegime" ng-click=playSound() class="shortcut link buttonSound"><i class=mif-volume-medium></i></button><button ng-show=charRegime ng-style=questionStyle ng-click=playSound() class="shortcut link font60">{{char}}</button><div ng-show=translateRegime class="russian-char font20">{{russian}}</div></center></div><div class="row condensed"><div id=accordion data-role=accordion data-closeany-any=true class="accordion place-center test"><div ng-repeat="wordsTest in wordsTests" class="frame no-padding"><a href=# ng-click=isRight(wordsTest.ansv) ng-style=variantStyle class=heading>{{wordsTest.main}}</a><div class="content no-margin"><div ng-show="charRegime || soundCharRegime" class="row cells6 no-margin"><audio ngsrc={{wordsTest.sound}}></audio><div class="cell colspan2"><h2>{{wordsTest.char}}</h2></div><div class="cell colspan3"><h2><span style=color:{{tone.color}} ng-repeat="tone in wordsTest.pinyin"><span ng-hide=settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></h2></div></div><div ng-show="translateRegime || soundTranslateRegime" class="row condensed no-margin"><h4>{{wordsTest.russian}}</h4></div><div class="row condensed no-margin"><button ng-class=wordsTest.ansver ng-click=nextWord() class=button>{{wordsTest.button}}</button></div></div></div></div></div></div><div class="cell colspan3"><div ng-include="\'partials/checkbox/checkbox.html\'"></div></div></div></div></div>')}]),tryHskServices.service("checkboxValues",["$cookies","$rootScope",function(e,n){this.initCheckboxValues=function(){n.checkboxValues=void 0===e.checkboxValues?{hsk1:!0,hsk2:!0,hsk3:!0,verb:!0,numeral:!0,adjective:!0,pronoun:!0,place:!0,relate:!0,noun:!0,otherPart:!0,otherThemes:!0}:JSON.parse(e.checkboxValues)},this.refreshCheckboxValues=function(){e.checkboxValues=JSON.stringify(n.checkboxValues)}}]),tryHskServices.service("settings",["$cookies","$rootScope",function(e,n){this.initSettings=function(){n.settings=void 0===e.settings?{sound:!0,color:!1,letter:!0,number:!1}:JSON.parse(e.settings)},this.refreshSettings=function(){e.settings=JSON.stringify(n.settings)}}]),tryHskServices.service("language",["$cookies","$rootScope",function(e,n){this.getLanguage=function(e){switch(e){case"Русский":n.content={test:"ТЕСТ",summary:"СЛОВАРЬ",search:"Поиск",select:"Выберите язык","char":"Иероглиф",pinyin:"Пиньинь",translate:"Перевод",eng:"Английский"};break;case"汉语":n.content={test:"__ТЕСТ__",summary:"__СЛОВАРЬ__",search:"搜索",select:"选择语言","char":"字",pinyin:"拼音",translate:"俄语",eng:"英语"};break;case"English":n.content={test:"TEST",summary:"SUMMARY",search:"Search",select:"Choose language","char":"Hieroglyph",pinyin:"Pinyin",translate:"Russian",eng:"English"}}},this.initLanguage=function(){return void 0===e.language?"Русский":JSON.parse(e.language).selectLanguage},this.refreshSelectlanguage=function(n){var t={selectLanguage:n};e.language=JSON.stringify(t)}}]),tryHskServices.service("score",[function(){this.answered=!1,this.count=0,this.isRight=function(e){!this.answered&&e&&(this.count=this.count?++this.count:1),this.answered=!0}}]),tryHskServices.factory("StateManager",["$rootScope",function(e){var n=[];return{add:function(t){n.push(t),e.globalLoader=!0},remove:function(t){n=_.without(n,t),0===n.length&&(e.globalLoader=!1)},getByName:function(e){return _.include(n,e)},clear:function(){return n.length=0,!0}}}]),tryHskServices.factory("SummaryStateManager",["$rootScope",function(e){var n=[];return{add:function(t){n.push(t),e.summaryLoader=!0},remove:function(t){n=_.without(n,t),0===n.length&&(e.summaryLoader=!1)},getByName:function(e){return _.include(n,e)},clear:function(){return n.length=0,!0}}}]),tryHskServices.factory("Word",["$resource",function(e){return e("words_.json",{},{query:{method:"GET",isArray:!0,cash:!0}})}]),tryHskServices.service("prepareWords",["Word","pinyin",function(e,n){this.getWords=function(){return e.query().$promise.then(function(e){for(var t,r=[],a=e.length,s=0;a>s;s++)t={},t["char"]=e[s].c,t.pinyin=n.processingOfPinyin(e[s].p),t.russian=e[s].r,t.sound="http://china-standart.ru/"+e[s].s,t.mask=parseInt(e[s].i,2),t.id=s,r.push(t);return r})}}]),tryHskServices.service("sortWords",["$q","prepareWords","$rootScope","checkboxValues",function(e,n,t,r){this.words=[],this.loaded=!1,this.getSortWords=function(){var a,s=this;return this.loaded||r.initCheckboxValues(),t.$watch("checkboxValues",function(e,n){e!==n&&(s.getSortWords(),r.refreshCheckboxValues())},!0),this.loaded?(a=e.defer(),a.resolve(s.sortWords(s.words)),a.promise):(this.loaded=!0,n.getWords().then(function(e){return s.sortWords(e)}))},this.sortWords=function(e){function n(e){for(var n=[],r=e.length,a=0;r>a;a++)t.checkboxValues.hsk3&&4&e[a].mask?n.push(a):t.checkboxValues.hsk1&&1&e[a].mask?n.push(a):t.checkboxValues.hsk2&&2&e[a].mask&&n.push(a);return n}function r(n){for(var r=[],a=n.length,s=0;a>s;s++)t.checkboxValues.noun&&8&e[n[s]].mask?r.push(n[s]):t.checkboxValues.verb&&16&e[n[s]].mask?r.push(n[s]):t.checkboxValues.adjective&&32&e[n[s]].mask?r.push(n[s]):t.checkboxValues.numeral&&64&e[n[s]].mask?r.push(n[s]):t.checkboxValues.pronoun&&128&e[n[s]].mask?r.push(n[s]):!t.checkboxValues.otherPart||248&e[n[s]].mask||r.push(n[s]);return r}function a(n){for(var r=[],a=n.length,s=0;a>s;s++)t.checkboxValues.place&&256&e[n[s]].mask?r.push(n[s]):t.checkboxValues.relate&&512&e[n[s]].mask?r.push(n[s]):!t.checkboxValues.otherThemes||768&e[n[s]].mask||r.push(n[s]);return r}function s(n){for(var t=[],r=0;r<n.length;r++)t.push(e[n[r]]);return t}return this.words=e,t.words=s(a(r(n(e)))),t.words}}]),tryHskServices.service("pinyin",[function(){this.processingOfPinyin=function(e){var n,t,r=[],a={},s=[];n=e.split(/\d/),n.length>1&&n.pop(),t=e.split(/[^0-9]/);for(var o=0;o<t.length;o++)t[o]&&r.push(t[o]);0==r.length&&(r=["ERROR"]);for(var i=0;i<n.length;i++){switch(a={},r[i]){case"1":a={number:"1",color:"blue"};break;case"2":a={number:"2",color:"orange"};break;case"3":a={number:"3",color:"green"};break;case"4":a={number:"4",color:"red"};break;case"0":a={number:"5",color:"gray"};break;default:a={number:"ERROR",color:"black"}}a.transpinyin=n[i],a.pinyin=this.filterLetter(a.transpinyin),s.push(a)}return s},this.filterLetter=function(e){var n,t;n=e.split(""),t=n.length;for(var r=0;t>r;r++)switch(n[r]){case"ā":n[r]="a";break;case"á":n[r]="a";break;case"ǎ":n[r]="a";break;case"à":n[r]="a";break;case"ē":n[r]="e";break;case"é":n[r]="e";break;case"ě":n[r]="e";break;case"è":n[r]="e";break;case"ī":n[r]="i";break;case"í":n[r]="i";break;case"ǐ":n[r]="i";break;case"ì":n[r]="i";break;case"ō":n[r]="o";break;case"ó":n[r]="o";break;case"ǒ":n[r]="o";break;case"ò":n[r]="o";break;case"ū":n[r]="u";break;case"ú":n[r]="u";break;case"ǔ":n[r]="u";break;case"ù":n[r]="u";break;case"ǚ":n[r]="u";break;case"ǜ":n[r]="u"}return n.join("")}}]),angular.module("tryHskFilters",[]).filter("HSK",function(){return function(e){return console.log("yes"),e?"✓":"✘"}}),tryHskControllers.controller("CheckboxController",["$scope","$rootScope","checkboxValues",function(e,n,t){}]),tryHskControllers.controller("InfoController",["$scope","$rootScope",function(e,n){}]),tryHskControllers.controller("LoveController",["$scope","$rootScope",function(e,n){}]),console.log("jk"),tryHskControllers.controller("SettingsController",["$scope","$rootScope","language","settings",function(e,n,t,r){e.languages=["Русский","汉语","English"],e.selectLang=t.initLanguage(t),t.getLanguage(e.selectLang),e.freshLanguage=function(e){t.refreshSelectlanguage(e)},r.initSettings(),e.$watch("settings",function(){r.refreshSettings()},!0)}]),tryHskControllers.controller("SummaryController",["$scope","$rootScope","SummaryStateManager",function(e,n,t){function r(r,a){if(r!==a){t.add("summary");for(var s=n.words,o=0;o<s.length;o++)for(var i=0;i<s[o].pinyin.length;i++)s[o].pinyin[i].colorStyle=n.settings.color?s[o].pinyin[i].color:"black";e.words=s,s=null,t.remove("summary")}}n.$watch("words",r,!0),n.$watch("settings.color",r),e.predicate="id"}]),tryHskControllers.controller("TestController",["$scope","$rootScope","sortWords","$timeout","StateManager","score",function(e,n,t,r,a,s){function o(e){return Math.round(Math.random()*e)}function i(e,n){var t=Math.floor(.85*e);do for(var r=!1,a=o(e-1),s=0;t>s;s++)if(a==n[s]){r=!0;break}while(r);return n.unshift(a),a}function c(e){for(var n=[],t=2;t>=0;t--){do{for(var r=o(e-1),a=!1,s=n.length-1;s>=0;s--)r===n[s]&&(a=!0);r===d&&(a=!0)}while(a);n.push(r)}return n.splice(o(3),0,d),n}function l(){var n=["❤","☀","♞","☭"];e["char"]="☯";for(var t=0;4>t;t++)h[t]["char"]=n[t],h[t].pinyin="☀",h[t].russian="♞",h[t].sound="",h[t].ansver="primary",h[t].button="лол!!!"}function u(t){for(var r=0;4>r;r++){if(h[r]["char"]=t[g[r]]["char"],h[r].pinyin=t[g[r]].pinyin,!n.settings.color)for(var a=0;a<h[r].pinyin.length;a++)h[r].pinyin[a].color="black";h[r].russian=t[g[r]].russian,("произношение - перевод"===e.select||"иероглиф - перевод"===e.select)&&(h[r].main=t[g[r]].russian),("перевод - иероглиф"===e.select||"произношение - иероглиф"===e.select)&&(h[r].main=t[g[r]]["char"]),h[r].sound=t[g[r]].sound,h[r].id=t[g[r]].id,g[r]==d?(h[r].ansver="success",h[r].ansv=!0,h[r].button="Молодец!"):(h[r].ansver="danger",h[r].ansv=!1,h[r].button="Всё получится!")}}function p(n,t){n!==t&&(e.button_next="ОБНОВИТЬ",e.class_button_next="warning",e.showSpin=!0,f=new Array(10))}var d,f=[],h=[{},{},{},{}],g=(document.getElementById("russian_char"),document.getElementById("sound_test"),[]);e.currentRights=0,a.add("test"),e.regimes=["иероглиф - перевод","перевод - иероглиф","произношение - перевод","произношение - иероглиф"],e.select=e.regimes[0],e.$watch("select",p,!0),n.$watch("checkboxValues",p,!0),e.isRight=function(n){s.isRight(n),s.count&&(e.answer=!0,e.currentRights=s.count)},e.playSound=function(){return document.getElementById("playSound").play(),!1},e.fill=function(){var t=n.words;switch($("div.content").css("display","none").css("border",""),$("div.frame").removeClass("active"),d=i(t.length,f),e.questionStyle=1==t[d]["char"].length?{width:"92px"}:{width:80*t[d]["char"].length+"px"},e["char"]=t[d]["char"],e.russian=t[d].russian,e.select){case"иероглиф - перевод":e.charRegime=!0,e.translateRegime=!1,e.soundCharRegime=!1,e.soundTranslateRegime=!1;break;case"перевод - иероглиф":e.charRegime=!1,e.translateRegime=!0,e.soundCharRegime=!1,e.soundTranslateRegime=!1;break;case"произношение - перевод":e.charRegime=!1,e.translateRegime=!1,e.soundCharRegime=!0,e.soundTranslateRegime=!1,document.getElementById("playSound").play();break;case"произношение - иероглиф":e.charRegime=!1,e.translateRegime=!1,e.soundCharRegime=!1,e.soundTranslateRegime=!0,document.getElementById("playSound").play()}return e.variantStyle=e.charRegime||e.soundCharRegime?"":{"font-size":"40px","font-weight":"normal"},e.sound=t[d].sound,g=c(t.length),u(t),setTimeout(function(){$("div.content:has(button.success)").css("border","2px solid #60a917"),$("div.content:has(button.danger)").css("border","2px solid red")},500),h},e.nextWord=function(){s.answered=!1,e.showSpin=!1,e.button_next="СЛЕДУЮЩИЙ",e.class_button_next="info",n.words.length<10?l():(e.fill(),r(function(){document.getElementById("sound").innerHTML=n.settings.sound||"произношение - перевод"===e.select||"произношение - иероглиф"===e.select?'<audio id="playSound" src="'+e.sound+'" autoplay ></audio>':'<audio id="playSound" src="'+e.sound+'"></audio>'},100))},function(){t.getSortWords().then(function(){e.nextWord(),e.wordsTests=h,a.remove("test")})}()}]);